<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Next2D</title>
    <script defer type="module" src="./src/index.ts"></script>
</head>
<body style="margin: 0; padding: 0;">
<script>
    window.addEventListener("DOMContentLoaded", async () => 
    {
        // next2d.load("develop");

        const count = 1;
        const root = next2d
            .createRootMovieClip(1000, 416, 60)
            .then((root) => 
            {
                const { Shape } = next2d.display;

                const rects = [];
                for (let i = 0; i < count; i++) {
                    const x = Math.random() * 1000;
                    const y = Math.random() * 416;
                    const size = 10 + Math.random() * 40;
                    const speed = 1 + Math.random();

                    var rect = new Shape();

                    rect
                        .graphics
                        .beginFill("#fff")
                        .lineStyle(1, "#000")
                        .drawRect(0, 0, size, size);

                    rect.x = x;
                    rect.y = y;

                    root.addChild(rect);

                    rects.push({ size, speed, el: rect });
                }

                root.addEventListener("enterFrame", () =>
                {
                    for (let i = 0; i < count; i++) {
                        const rect = rects[i];

                        if (rect.el.x + rect.size < 0) {
                            rect.el.x = 1000 + rect.size / 2;
                        }

                        rect.el.x -= rect.speed;
                    }
                });
            });

    });
</script>
</body>
</html>